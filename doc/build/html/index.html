
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>rbackup - A simple rsync backup utility &#8212; rbackup 0.4 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="rbackup package" href="rbackup.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="rbackup-a-simple-rsync-backup-utility">
<h1>rbackup - A simple rsync backup utility<a class="headerlink" href="#rbackup-a-simple-rsync-backup-utility" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="rbackup.html">rbackup package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="rbackup.html#subpackages">Subpackages</a></li>
<li class="toctree-l2"><a class="reference internal" href="rbackup.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="rbackup.html#module-rbackup.config">rbackup.config module</a></li>
<li class="toctree-l2"><a class="reference internal" href="rbackup.html#module-rbackup.rsync">rbackup.rsync module</a></li>
<li class="toctree-l2"><a class="reference internal" href="rbackup.html#module-rbackup">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="rbackup.plugins.html">rbackup.plugins package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="rbackup.plugins.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="rbackup.plugins.html#module-rbackup.plugins.packagemanager">rbackup.plugins.packagemanager module</a></li>
<li class="toctree-l2"><a class="reference internal" href="rbackup.plugins.html#module-rbackup.plugins">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="rbackup.struct.html">rbackup.struct package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="rbackup.struct.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="rbackup.struct.html#module-rbackup.struct.hierarchy">rbackup.struct.hierarchy module</a></li>
<li class="toctree-l2"><a class="reference internal" href="rbackup.struct.html#module-rbackup.struct.repository">rbackup.struct.repository module</a></li>
<li class="toctree-l2"><a class="reference internal" href="rbackup.struct.html#module-rbackup.struct.snapshot">rbackup.struct.snapshot module</a></li>
<li class="toctree-l2"><a class="reference internal" href="rbackup.struct.html#module-rbackup.struct">Module contents</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="principle-of-operation">
<h2>Principle of Operation<a class="headerlink" href="#principle-of-operation" title="Permalink to this headline">¶</a></h2>
<p>Each time the backup script for rbackup is run, it creates a new snapshot and runs a backup of included paths using rsync to that new snapshot. This ensures that backup data does not overwrite pre-existing data. Paths are included by including paths relative to <code class="docutils literal notranslate"><span class="pre">/</span></code> in files suffixed with <code class="docutils literal notranslate"><span class="pre">-include.conf</span></code> in  <code class="docutils literal notranslate"><span class="pre">/etc/rbackup</span></code>.</p>
<p>The backup script follows this procedure:</p>
<ol class="arabic simple">
<li><p>Load specified repository and existing snapshots if any.</p></li>
<li><p>If specified repository is new, then set up metadata.</p></li>
<li><p>Create a new snapshot in the specified repository. If a name is specified, give the snapshot said name. If a snapshot with said name already exists, then overwrite that snapshot instead.</p></li>
<li><p>Aggregate all desired and excluded paths into two separate temporary files. Pass both files and default arguments to rsync.</p></li>
<li><p>Run the rsync process and wait until process is finished</p></li>
<li><p>If there is an existing symlink pointing to a snapshot in the repository, then delete it.</p></li>
<li><p>Create a symlink in the repository root directory pointing to the new snapshot.</p></li>
</ol>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Repositories are not network-aware. rbackup does not have provisions to handle remote hosts.</p>
</div>
</div>
<div class="section" id="the-scripts">
<h2>The Scripts<a class="headerlink" href="#the-scripts" title="Permalink to this headline">¶</a></h2>
<p><strong>backup</strong></p>
<p><em>Options</em></p>
<dl class="option-list">
<dt><kbd><span class="option">-c</span>, <span class="option">--use-checksums</span></kbd></dt>
<dd><p>use rsync’s checksum feature to detect file changes</p>
</dd>
<dt><kbd><span class="option">-d</span>, <span class="option">--dry-run</span></kbd></dt>
<dd><p>make this backup a dry run</p>
</dd>
<dt><kbd><span class="option">--debug</span></kbd></dt>
<dd><p>show debug messages</p>
</dd>
<dt><kbd><span class="option">-n</span>, <span class="option">--name</span></kbd></dt>
<dd><p>name to give to the backup snapshot</p>
</dd>
<dt><kbd><span class="option">-s</span>, <span class="option">--run-post-sync</span></kbd></dt>
<dd><p>run sync syscall after backup</p>
</dd>
<dt><kbd><span class="option">-v</span>, <span class="option">--verbose</span></kbd></dt>
<dd><p>show info messages</p>
</dd>
</dl>
<p><em>Usage</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">backup</span> <span class="p">[</span><span class="n">options</span><span class="p">]</span> <span class="p">[</span><span class="n">repository</span> <span class="n">path</span><span class="p">]</span>
</pre></div>
</div>
<p>On each run of this script, a new snapshot is made and any unchanged
files are hardlinked into the new snapshot.</p>
<p><strong>restore</strong></p>
<p><em>Options</em></p>
<p><em>TODO insert options here</em></p>
<p><strong>snapshot-manager</strong></p>
<p><em>Usage</em></p>
<p><em>TODO insert more stuff here</em></p>
</div>
<div class="section" id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<p>The directory for configuration files is /etc/rbackup.</p>
<p>Paths to include in the backup are included in <code class="docutils literal notranslate"><span class="pre">*-include.conf</span></code> files located in the configuration directory. Likewise, paths to exclude from the backup are in <code class="docutils literal notranslate"><span class="pre">*-exclude.conf</span></code> files in the same directory. The backup script automatically looks for and includes paths written in these files. Each path, whether include or exclude should be relative to the root directory (/).</p>
<p>For example, if the /etc/NetworkManager directory was desired for backup, one would write etc/NetworkManager in a file that could be named ‘etc-include.conf’ in /etc/rbackup. Users can separate different paths into multiple include files for organization.</p>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>To install system-wide:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python setup.py build
# python setup.py install --prefix=&quot;/usr&quot; --optimize=1 --skip-build
</pre></div>
</div>
<p>To install in a specified directory/package</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python setup.py build
$ python setup.py install --prefix=&quot;/usr&quot; --root=&quot;targetdir&quot; --optimize=1 --skip-build
</pre></div>
</div>
</div>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="#">rbackup</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="rbackup.html">rbackup package</a></li>
<li class="toctree-l1"><a class="reference internal" href="rbackup.plugins.html">rbackup.plugins package</a></li>
<li class="toctree-l1"><a class="reference internal" href="rbackup.struct.html">rbackup.struct package</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="#">Documentation overview</a><ul>
      <li>Next: <a href="rbackup.html" title="next chapter">rbackup package</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Eric Torres.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>